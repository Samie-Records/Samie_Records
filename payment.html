<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Make Your Payment</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="general.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Outfit:wght@100..900&display=swap"
      rel="stylesheet" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet" />
  </head>
  <body>
    <header class="sidebar">
      <div onclick="hideSidebar()" class="mbi">
        <a class="close" href="#"><i class="bx bx-x"></i></a>
      </div>

      <nav class="navbar-side">
        <a href="index.html" class="active-bar">Home</a>
        <a href="about.html">About</a>
        <a href="tutor.html">Tutor Reg.</a>
        <a href="mixing.html">Mixing & Mastering</a>
        <a href="payment.html">Payment</a>
        <a href="form.html">Contact</a>
      </nav>
    </header>

    <header class="header">
      <a href="index.html" class="logo">
        <img class="L-icon" src="logo.png" alt="" />
      </a>
      <nav class="navbar">
        <a href="index.html" class="active">Home</a>
        <a href="about.html">About</a>
        <a href="tutor.html">Tutor Reg.</a>
        <a href="mixing.html">Mixing & Mastering</a>
        <a href="payment.html">Payment</a>
        <a href="form.html">Contact</a>
      </nav>

      <!-- Search Icon -->
      <div class="search-icon-container">
        <img
          src="search-regular-24.png"
          alt="Search"
          class="search-icon"
          onclick="openSearch()" />
      </div>

      <!-- Fullscreen Search Overlay -->
      <div id="search-overlay" class="search-overlay">
        <div class="search-content">
          <form id="searchForm">
            <input
              type="search"
              class="search-input"
              id="searchInput"
              placeholder="Search..."
              required />
          </form>
          <button class="close-btn" onclick="closeSearch()">&times;</button>
        </div>
      </div>

      <div class="shop-wrap">
        <a href="payment.html"
          ><img class="shop-icon" src="shop.png" alt=""
        /></a>
        <a href="form.html"
          ><img class="contact-icon" src="contact mail.png" alt=""
        /></a>
      </div>

      <div class="menu-button" onclick="showSidebar()">
        <a class="menu" href="#"><i class="bx bx-menu"></i></a>
      </div>
    </header>

    <section class="payment-wrapper">
      <form class="payment-form" onsubmit="payWithPaystack(event)">
        <h2>Make A Payment!</h2>
        <input type="text" id="name" placeholder="Full Name" required />
        <input type="email" id="email" placeholder="Email Address" required />
        <input type="tel" id="phone" placeholder="Phone Number" required />
        <input type="number" id="amount" placeholder="Amount (₦)" required />
        <button type="submit">Pay Now</button>
      </form>
    </section>

    <!-- ending page -->
    <section class="ending">
      <div class="SocialM">
        <div class="Follow">Follow Me</div>
        <a class="c" href="https://www.tiktok.com/@samierecords" target="_blank"
          ><div><i class="bx bxl-tiktok"></i></div
        ></a>
        <a
          class="c"
          href="https://www.instagram.com/samierecords/"
          target="_blank"
          ><div><i class="bx bxl-instagram-alt"></i></div
        ></a>
        <a
          class="c"
          href="https://web.facebook.com/profile.php?id=100082840788952"
          target="_blank"
          ><div><i class="bx bxl-facebook-circle"></i></div
        ></a>
        <a
          class="c"
          href="https://www.youtube.com/@samierecords/shorts"
          target="_blank"
          ><div><i class="bx bxl-youtube"></i></div
        ></a>
      </div>
      <div class="copyrights">
        Copyright <i class="bx bx-copyright"></i> 2025 Samie Records | All
        Rights Reserved.
      </div>
    </section>
    <!-- Paystack Script -->
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
      function payWithPaystack(e) {
        e.preventDefault();

        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;
        let phone = document.getElementById("phone").value;
        let amount = document.getElementById("amount").value;

        let handler = PaystackPop.setup({
          key: "pk_test_95b305c95ab3c46df22548b3a04b259c2f4c6f7c", // ✅ Replace this with your Paystack public key
          email: email,
          amount: amount * 100, // Amount in kobo
          currency: "NGN",
          ref: "PSK_" + Math.floor(Math.random() * 1000000000 + 1),
          metadata: {
            custom_fields: [
              {
                display_name: "Full Name",
                variable_name: "full_name",
                value: name,
              },
              {
                display_name: "Phone Number",
                variable_name: "phone_number",
                value: phone,
              },
            ],
          },
          callback: function (response) {
            // ✅ Redirect to thank-you page
            window.location.href = "thank-you.html?ref=" + response.reference;
          },
          onClose: function () {
            alert("Payment window closed.");
          },
        });

        handler.openIframe();
      }
    </script>

    <script>
      function showSidebar() {
        const sidebar = document.querySelector(".sidebar");
        sidebar.style.display = "flex";
      }

      function hideSidebar() {
        const sidebar = document.querySelector(".sidebar");
        sidebar.style.display = "none";
      }
    </script>
    <script>
      function openSearch() {
        document.getElementById("search-overlay").style.display = "flex";
      }

      function closeSearch() {
        document.getElementById("search-overlay").style.display = "none";
      }
    </script>

    <script>
      // Open and close functions
      function openSearch() {
        document.getElementById("search-overlay").style.display = "flex";
        document.getElementById("searchInput").focus();
      }

      function closeSearch() {
        document.getElementById("search-overlay").style.display = "none";
      }

      // Handle search submission
      document
        .getElementById("searchForm")
        .addEventListener("submit", function (e) {
          e.preventDefault(); // prevent page refresh
          const query = document.getElementById("searchInput").value.trim();
          if (query) {
            window.location.href = `search.html?q=${encodeURIComponent(query)}`;
          }
        });

      // Open and close functions
      function openSearch() {
        document.getElementById("search-overlay").style.display = "flex";
        document.getElementById("searchInput").focus();
      }

      function closeSearch() {
        document.getElementById("search-overlay").style.display = "none";
      }

      // Handle search submission
      document
        .getElementById("searchForm")
        .addEventListener("submit", function (e) {
          e.preventDefault(); // prevent page refresh
          const query = document.getElementById("searchInput").value.trim();
          if (query) {
            window.location.href = `search.html?q=${encodeURIComponent(query)}`;
          }
        });
    </script>
  </body>
</html>
